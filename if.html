<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Kate Izsak — Digital and Computational Arts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Main site stylesheet -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body class="page-if">

  <!-- Top Neon Title -->
  <header class="page-header">
    <h1 class="neon">Interactive Fiction</h1>
    <nav class="nav-bar">
      <a href="index2.html" class="nav-btn">Home</a>
      <a href="digital-painting.html" class="nav-btn">Digital Painting</a>
      <a href="comp-image-design.html" class="nav-btn">Computational Image Design</a>
      <a href="graphic_design.html" class="nav-btn">Graphic Design</a>
    </nav>
  </header>

  <main class="gallery-layout">
    <!-- LEFT: title + caption + description (filled by JS) -->
    <section class="gallery-info">
      <h2 id="image-caption" class="neon-soft"></h2>
      <p id="image-description" class="piece-description"></p>
    </section>

    <!-- RIGHT: image carousel -->
    <section class="gallery-carousel">
      <div class="carousel-window">

        <img
          src="https://github.com/kizsak/Portfolio/raw/main/VaultLastTry.gif"
          data-full="https://github.com/kizsak/Portfolio/raw/main/VaultLastTry.gif"
          alt="GIF showing a portion of play in the Vault of Stories"
          class="carousel-image"
          data-caption="<em>The Vault of Stories</em>"
          data-description="Development Platform: Twine<br>IFID: 57BE9A54-292C-4F19-8886-01D06D5420BD<br>TUID: 8das9n6egfckcwln"
        />

        <img
          src="https://github.com/kizsak/Portfolio/raw/main/Texture.gif"
          data-full="https://github.com/kizsak/Portfolio/raw/main/Texture.gif"
          alt="GIF showing a portion of play in the Grief Gardens"
          class="carousel-image"
          data-caption="<em>The Grief Gardens</em>"
          data-description="Development Platform: Texture<br>IFID: E2A5066D-E0EB-49B2-9117-AAB738F36452<br>TUID: c43ilw3epi791tya"
        />

        <img
          src="https://github.com/kizsak/Portfolio/raw/main/Parser.gif"
          data-full="https://github.com/kizsak/Portfolio/raw/main/Parser.gif"
          alt="GIF showing a portion of play in The Archivist's Vault"
          class="carousel-image"
          data-caption="<em>The Archivist's Vault</em>"
          data-description="Development Platform: Inform<br>IFID: D1B48BCF-0741-4D41-B7BB-EB304674AD45<br>TUID: 74ufidb7o5fwgraw"
        />

    
      </div>

      <div class="carousel-controls">
        <button class="carousel-btn prev" type="button">‹</button>
        <button class="carousel-btn next" type="button">›</button>
      </div>
    </section>
  </main>

  <!-- Carousel + Lightbox logic -->
  <script>
    (function () {
      const images = document.querySelectorAll('.carousel-image');
      const prevBtn = document.querySelector('.carousel-btn.prev');
      const nextBtn = document.querySelector('.carousel-btn.next');
      const captionEl = document.getElementById('image-caption');
      const descriptionEl = document.getElementById('image-description');

      // Lightbox elements (exist later in the DOM, but the script runs after them anyway)
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightboxImg');
      const lightboxCaption = document.getElementById('lightboxCaption');
      const lightboxClose = document.getElementById('lightboxClose');
      const lightboxStage = document.getElementById('lightboxStage');

      if (!images.length) return;

      let current = 0;

      function updateTextFromImage(index) {
        const img = images[index];
        if (!img) return;

        if (captionEl) captionEl.innerHTML = img.dataset.caption || '';
        if (descriptionEl) descriptionEl.innerHTML = img.dataset.description || '';
      }

      function showSlide(index) {
        images[current].classList.remove('active');
        current = (index + images.length) % images.length;
        images[current].classList.add('active');
        updateTextFromImage(current);
      }

      function openLightboxFromImage(img) {
        if (!lightbox || !lightboxImg) return;

        // Prefer data-full if provided
        lightboxImg.src = img.dataset.full || img.src;
        lightboxImg.alt = img.alt || '';

        if (lightboxCaption) {
          const tmp = document.createElement('div');
          tmp.innerHTML = img.dataset.caption || '';
          lightboxCaption.textContent = tmp.textContent || tmp.innerText || '';
        }

        lightbox.classList.add('open');
        lightbox.setAttribute('aria-hidden', 'false');
        document.body.classList.add('no-scroll');
      }

      function closeLightbox() {
        if (!lightbox) return;
        lightbox.classList.remove('open');
        lightbox.setAttribute('aria-hidden', 'true');
        document.body.classList.remove('no-scroll');
        if (lightboxImg) lightboxImg.src = '';
      }

      // Initialize (force exactly one active slide)
      images.forEach(img => img.classList.remove('active'));
      images[0].classList.add('active');
      updateTextFromImage(0);

      if (prevBtn) {
        prevBtn.addEventListener('click', function (e) {
          e.preventDefault();
          showSlide(current - 1);
        });
      }

      if (nextBtn) {
        nextBtn.addEventListener('click', function (e) {
          e.preventDefault();
          showSlide(current + 1);
        });
      }

      // Clicking the CURRENT image should open lightbox.
      // (We attach to all, but only the visible one is clickable anyway.)
      images.forEach((img) => {
        img.style.cursor = 'zoom-in';
        img.addEventListener('click', function (e) {
          e.preventDefault();
          e.stopPropagation();
          openLightboxFromImage(img);
        });
      });

      if (lightboxClose) lightboxClose.addEventListener('click', closeLightbox);

      if (lightbox) {
        // Click outside stage closes
        lightbox.addEventListener('click', function (e) {
          if (e.target === lightbox) closeLightbox();
        });
      }

      if (lightboxStage) {
        lightboxStage.addEventListener('click', function (e) {
          e.stopPropagation();
        });
      }

      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && lightbox && lightbox.classList.contains('open')) {
          closeLightbox();
        }
      });
    })();
  </script>

  <!-- Lightbox Modal (must exist for the JS selectors) -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="lightbox-close" id="lightboxClose" type="button" aria-label="Close image">×</button>

    <div class="lightbox-stage" id="lightboxStage" role="dialog" aria-modal="true">
      <img id="lightboxImg" alt="">
      <p class="lightbox-caption" id="lightboxCaption"></p>
    </div>
  </div>

</body>
</html>
